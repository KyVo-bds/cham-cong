<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ch·∫•m C√¥ng Qu·∫£n L√Ω</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script defer src="../js/chamCongQL.js?v=20250811215714"></script>
  <script>
    console.log('[Test Inline] danhSachQL = ', localStorage.getItem('danhSachQL'));
  </script>
</head>

<body>
  <!-- üìå Giao di·ªán Ch·∫•m C√¥ng Qu·∫£n L√Ω -->
  <div class="p-6 space-y-6">
    <h2 class="text-xl font-bold">üë§ Ch·∫•m C√¥ng Qu·∫£n L√Ω</h2>

    <!-- üîç B·ªô l·ªçc t√¨m ki·∫øm -->
    <div class="flex gap-10 w-full">
      <!-- C·ªôt 1: T√¨m theo t√™n -->
      <div class="w-1/2 flex flex-col gap-2">
        <label for="inputTenNV" class="font-semibold">T√¨m theo t√™n nh√¢n vi√™n</label>
        <input id="inputTenNV" type="text" placeholder="Nh·∫≠p t√™n nh√¢n vi√™n..."
               class="border px-3 py-2 rounded w-full" />
        <button id="btnTimTheoTen"
                class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-fit">
          T√¨m
        </button>
      </div>

      <!-- C·ªôt 2: T√¨m theo kh·ªëi / ph√≤ng ban -->
      <div class="w-1/2 flex flex-col gap-4">
        <!-- D√≤ng 1: Radio ch·ªçn kh·ªëi -->
        <div class="flex items-center gap-2">
          <input type="radio" name="timTheo" value="khoi" id="radioKhoi" checked onchange="onRadioChange()" />
          <label for="radioKhoi" class="font-semibold">T√¨m theo Kh·ªëi</label>
        </div>
        <select id="selectKhoi" class="border px-2 py-1 rounded h-10 w-full"></select>

        <!-- D√≤ng 2: Radio ch·ªçn ph√≤ng ban -->
        <div class="flex items-center gap-2">
          <input type="radio" name="timTheo" value="phongban" id="radioPhongBan" onchange="onRadioChange()" />
          <label for="radioPhongBan" class="font-semibold">T√¨m theo Ph√≤ng ban</label>
        </div>
        <select id="selectPhongBan" class="border px-2 py-1 rounded h-10 w-full" disabled></select>

        <button id="btnTimKiem"
                class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-fit">
          T√¨m
        </button>
      </div>
    </div>
  </div>

  <!-- üìã B·∫£ng k·∫øt qu·∫£ t√¨m ki·∫øm -->
  <div id="ketQuaContainer" class="mt-6 border rounded overflow-auto max-h-[500px]">
    <!-- Table s·∫Ω ƒë∆∞·ª£c render ·ªü ƒë√¢y -->
  </div>

  <!-- üì¶ Modal Nh·∫≠p C√¥ng Qu·∫£n L√Ω -->
  <div id="modalNhapCongQL" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center">
    <div class="bg-white p-6 rounded-lg shadow-xl w-full max-w-3xl">
      <h3 class="text-xl font-bold mb-4">üìÜ Nh·∫≠p C√¥ng Qu·∫£n L√Ω</h3>

      <!-- Th√¥ng tin qu·∫£n l√Ω -->
      <div id="qlThongTin" class="grid grid-cols-2 gap-4 mb-6 text-sm">
        <!-- Dynamic content -->
      </div>

      <!-- Switcher + Ng√†y -->
      <div class="mb-4 space-y-2">
        <label class="flex items-center gap-2">
          <!-- B·∫≠t s·∫µn Chu·ªói ng√†y ƒë·ªÉ th·∫•y 2 checkbox lu√¥n -->
          <input type="checkbox" id="switchChuoiNgay" checked />
          Chu·ªói ng√†y
        </label>

        <!-- H√†ng range + weekend filter (m·∫∑c ƒë·ªãnh hi·ªán do ƒë√£ checked ·ªü tr√™n) -->
        <div id="dateRangeWrapper" class="flex flex-wrap items-end gap-4">
          <div class="flex-1 min-w-[220px]">
            <label class="block text-sm mb-1" for="tuNgay">T·ª´ Ng√†y</label>
            <input type="date" id="tuNgay" class="border px-3 py-2 rounded w-full" />
          </div>
          <div class="flex-1 min-w-[220px]">
            <label class="block text-sm mb-1" for="denNgay">ƒê·∫øn Ng√†y</label>
            <input type="date" id="denNgay" class="border px-3 py-2 rounded w-full" />
          </div>

          <!-- 2 checkbox cu·ªëi tu·∫ßn -->
          <div id="weekendFilter" class="flex items-center gap-6">
            <label class="flex items-center gap-2">
              <input type="checkbox" id="excludeSat" />
              Lo·∫°i tr·ª´ Th·ª© 7
            </label>
            <label class="flex items-center gap-2">
              <input type="checkbox" id="excludeSun" />
              Lo·∫°i tr·ª´ Ch·ªß Nh·∫≠t
            </label>
          </div>
        </div>

        <!-- Ng√†y ƒë∆°n: ·∫©n m·∫∑c ƒë·ªãnh v√¨ ƒëang ·ªü ch·∫ø ƒë·ªô Chu·ªói ng√†y -->
        <div id="singleDateWrapper" class="hidden">
          <label class="block text-sm mb-1" for="ngayDon">Ng√†y</label>
          <input type="date" id="ngayDon" class="border px-3 py-2 rounded w-full" />
        </div>
      </div>

      <!-- Button h√†nh ƒë·ªông -->
      <div class="flex justify-between mt-4">
        <button id="btnNhapCongQL" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
          Nh·∫≠p C√¥ng
        </button>
        <button id="btnDongModalQL" class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">
          ƒê√≥ng
        </button>
      </div>

      <!-- C·∫£nh b√°o tr√πng d·ªØ li·ªáu -->
      <div id="warningTrungCongQL" class="mt-4 hidden text-red-600">
        <p class="font-semibold">‚ö†Ô∏è D·ªØ li·ªáu ƒë√£ t·ªìn t·∫°i. Vui l√≤ng ki·ªÉm tra l·∫°i.</p>
        <div id="bangTrungCongQL" class="mt-2 border rounded overflow-auto max-h-[300px]">
          <!-- B·∫£ng d·ªØ li·ªáu tr√πng s·∫Ω render ·ªü ƒë√¢y -->
        </div>
        <div class="text-right mt-3">
          <button id="btnChapNhanNhapCongQL"
                  class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
            ƒê√£ ki·ªÉm tra v√† ch·∫•p nh·∫≠n
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- JS nh·ªè ƒë·ªÉ toggle range / single -->
  <script>
    (function () {
      const switcher = document.getElementById('switchChuoiNgay')
      const rangeWrap = document.getElementById('dateRangeWrapper')
      const singleWrap = document.getElementById('singleDateWrapper')

      function applyUI () {
        const isRange = !!switcher.checked
        rangeWrap.classList.toggle('hidden', !isRange)
        singleWrap.classList.toggle('hidden', isRange)
      }

      switcher?.addEventListener('change', applyUI)
      // tr·∫°ng th√°i ban ƒë·∫ßu (ƒë√£ checked n√™n range hi·ªán s·∫µn)
      applyUI()
    })()
  </script>
</body>
</html>
