<!-- nhapPhieuCongTac.html -->
<div class="page-shell">
  <div id="congTacPage" class="page-section">
    <h2 class="text-xl font-bold mb-4">üìù Nh·∫≠p Phi·∫øu C√¥ng T√°c</h2>

    <!-- Employee Lookup Section -->
    <div class="mb-6 space-y-2">
      <label for="employeeId" class="block font-semibold">Nh·∫≠p m√£ nh√¢n vi√™n ho·∫∑c h·ªç t√™n nh√¢n vi√™n:</label>
      <div class="flex gap-2">
        <input id="employeeId" type="text" class="border border-gray-300 rounded px-3 py-1 w-48" />
        <button onclick="getEmployeeInfo()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-1 rounded">
          L·∫•y th√¥ng tin
        </button>
      </div>
      <p id="employeeWarning" class="text-red-600 font-bold hidden">Kh√¥ng t√¨m th·∫•y th√¥ng tin nh√¢n vi√™n t·ª´ file ch·∫•m c√¥ng
        v√¢n tay</p>
    </div>

    <!-- Employee Info Table Scroll -->
    <div id="employeeInfoTable" class="overflow-auto max-h-[300px] border rounded bg-white shadow hidden mb-6"></div>

    <!-- Phi·∫øu C√¥ng T√°c Input Form -->
    <div class="space-y-4 border-t pt-6">
      <h3 class="text-lg font-semibold">üóìÔ∏è Th√¥ng tin Phi·∫øu C√¥ng T√°c</h3>

      <div class="flex flex-wrap gap-4 w-full max-w-4xl">
        <div class="flex-1 min-w-[250px]">
          <label class="block font-medium">M√£ s·ªë NV (b·∫Øt bu·ªôc):
            <input id="phieuMaNV" type="text" class="required-input border border-gray-300 rounded px-3 py-1 w-full" />
            <p id="errorMaNV" class="text-red-600 text-sm hidden">Nh·∫≠p th√¥ng tin b·∫Øt bu·ªôc</p>
          </label>
        </div>
        <div class="flex-1 min-w-[250px]">
          <label class="block font-medium">T√™n NV:
            <input id="phieuTenNV" type="text" class="border border-gray-300 rounded px-3 py-1 w-full" />
          </label>
        </div>

        <!-- Date row: switch + (Ng√†y | T·ª´/ƒê·∫øn) tr√™n C√ôNG M·ªòT D√íNG -->
        <div id="dateRow" class="w-full flex items-end gap-4 flex-wrap">

          <!-- Switcher Chu·ªói ng√†y: iOS-style -->
          <div class="flex items-center gap-2">
            <label class="font-medium">Chu·ªói ng√†y:</label>

            <label class="inline-flex items-center cursor-pointer select-none">
              <!-- peer -->
              <input type="checkbox" id="isRange" class="sr-only peer" onchange="toggleDateFields()">

              <!-- Track (sibling c·ªßa input); n√∫t tr√≤n l√† ::before -->
              <span class="relative w-16 h-7 rounded-full bg-gray-300 transition-colors
                 peer-checked:bg-blue-600
                 before:content-[''] before:absolute before:top-1 before:left-1
                 before:w-5 before:h-5 before:bg-white before:rounded-full
                 before:transition-transform before:duration-200
                 peer-checked:before:translate-x-9"></span>

              <!-- OFF/ON text (sibling c·ªßa input) -->
              <span class="ml-2 text-xs font-semibold text-gray-600 peer-checked:hidden">OFF</span>
              <span class="ml-2 text-xs font-semibold text-blue-600 hidden peer-checked:inline">ON</span>
            </label>
          </div>


          <!-- Single date -->
          <div id="singleDateField" class="flex items-center gap-2">
            <label class="block font-medium">Ng√†y:</label>
            <input id="singleDate" type="date" class="required-input border border-gray-300 rounded px-3 py-1 w-48" />
            <p id="errorSingleDate" class="text-red-600 text-sm hidden">Nh·∫≠p th√¥ng tin b·∫Øt bu·ªôc</p>
          </div>

          <!-- Range dates -->
          <div id="dateRangeFields" class="flex items-center gap-2 hidden">
            <label class="block font-medium">T·ª´ ng√†y:</label>
            <input id="fromDate" type="date" class="required-input border border-gray-300 rounded px-3 py-1 w-48" />
            <label class="block font-medium">ƒê·∫øn ng√†y:</label>
            <input id="toDate" type="date" class="required-input border border-gray-300 rounded px-3 py-1 w-48" />
            <p id="errorFromDate" class="text-red-600 text-sm hidden">Nh·∫≠p th√¥ng tin b·∫Øt bu·ªôc</p>
            <p id="errorToDate" class="text-red-600 text-sm hidden">Nh·∫≠p th√¥ng tin b·∫Øt bu·ªôc</p>
          </div>

        </div>


        <!-- Submit button -->
        <div class="mt-4">
          <button onclick="submitPhieuCongTac()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded">
            Nh·∫≠p
          </button>
        </div>

        <!-- Preview added Phi·∫øu C√¥ng T√°c -->
        <div id="phieuPreview" class="mt-6 hidden">
          <h4 class="font-semibold">üìÑ Phi·∫øu C√¥ng T√°c ƒë√£ nh·∫≠p:</h4>
          <div id="phieuPreviewContent" class="bg-white border rounded px-4 py-2 mt-2"></div>
        </div>
      </div>
    </div>
  </div>