<!-- nhapPhieuCongTac.html -->
<div id="congTacPage" class="page-section">
  <h2 class="text-xl font-bold mb-4">üìù Nh·∫≠p Phi·∫øu C√¥ng T√°c</h2>

  <!-- Employee Lookup Section -->
  <div class="mb-6 space-y-2">
    <label for="employeeId" class="block font-semibold">Nh·∫≠p m√£ nh√¢n vi√™n ho·∫∑c h·ªç t√™n nh√¢n vi√™n:</label>
    <div class="flex gap-2">
      <input id="employeeId" type="text" class="border border-gray-300 rounded px-3 py-1 w-48" />
      <button onclick="getEmployeeInfo()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-1 rounded">
        L·∫•y th√¥ng tin
      </button>
    </div>
    <p id="employeeWarning" class="text-red-600 font-bold hidden">Kh√¥ng t√¨m th·∫•y th√¥ng tin nh√¢n vi√™n t·ª´ file ch·∫•m c√¥ng v√¢n tay</p>
  </div>

  <!-- Employee Info Table Scroll -->
  <div id="employeeInfoTable" class="overflow-auto max-h-[300px] border rounded bg-white shadow hidden mb-6"></div>

  <!-- Phi·∫øu C√¥ng T√°c Input Form -->
  <div class="space-y-4 border-t pt-6">
    <h3 class="text-lg font-semibold">üóìÔ∏è Th√¥ng tin Phi·∫øu C√¥ng T√°c</h3>

    <div class="flex flex-wrap gap-4 w-full max-w-4xl">
      <div class="flex-1 min-w-[250px]">
        <label class="block font-medium">M√£ s·ªë NV (b·∫Øt bu·ªôc):
          <input id="phieuMaNV" type="text" class="required-input border border-gray-300 rounded px-3 py-1 w-full" />
          <p id="errorMaNV" class="text-red-600 text-sm hidden">Nh·∫≠p th√¥ng tin b·∫Øt bu·ªôc</p>
        </label>
      </div>
      <div class="flex-1 min-w-[250px]">
        <label class="block font-medium">T√™n NV:
          <input id="phieuTenNV" type="text" class="border border-gray-300 rounded px-3 py-1 w-full" />
        </label>
      </div>

      <!-- Chu·ªói ng√†y switcher -->
      <div class="w-full flex items-center gap-2 mt-2">
        <label class="font-medium">Chu·ªói ng√†y:</label>
        <label class="inline-flex items-center cursor-pointer">
          <input type="checkbox" id="isRange" class="sr-only peer" onchange="toggleDateFields()">
          <div class="w-11 h-6 bg-gray-200 rounded-full peer peer-checked:bg-blue-600 relative">
            <div class="dot absolute left-1 top-1 w-4 h-4 bg-white rounded-full transition peer-checked:translate-x-full"></div>
          </div>
        </label>
      </div>

      <!-- Range date inputs -->
      <div id="dateRangeFields" class="w-full flex flex-wrap gap-4 hidden">
        <div class="flex-1 min-w-[250px]">
          <label class="block font-medium">T·ª´ ng√†y:
            <input id="fromDate" type="date" class="required-input border border-gray-300 rounded px-3 py-1 w-full" />
            <p id="errorFromDate" class="text-red-600 text-sm hidden">Nh·∫≠p th√¥ng tin b·∫Øt bu·ªôc</p>
          </label>
        </div>
        <div class="flex-1 min-w-[250px]">
          <label class="block font-medium">ƒê·∫øn ng√†y:
            <input id="toDate" type="date" class="required-input border border-gray-300 rounded px-3 py-1 w-full" />
            <p id="errorToDate" class="text-red-600 text-sm hidden">Nh·∫≠p th√¥ng tin b·∫Øt bu·ªôc</p>
          </label>
        </div>
      </div>

      <!-- Single date input -->
      <div id="singleDateField" class="w-full mt-2">
        <label class="block font-medium">Ng√†y:
          <input id="singleDate" type="date" class="required-input border border-gray-300 rounded px-3 py-1 w-full" />
          <p id="errorSingleDate" class="text-red-600 text-sm hidden">Nh·∫≠p th√¥ng tin b·∫Øt bu·ªôc</p>
        </label>
      </div>
    </div>

    <!-- Submit button -->
    <div class="mt-4">
      <button onclick="submitPhieuCongTac()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded">
        Nh·∫≠p
      </button>
    </div>

    <!-- Preview added Phi·∫øu C√¥ng T√°c -->
    <div id="phieuPreview" class="mt-6 hidden">
      <h4 class="font-semibold">üìÑ Phi·∫øu C√¥ng T√°c ƒë√£ nh·∫≠p:</h4>
      <div id="phieuPreviewContent" class="bg-white border rounded px-4 py-2 mt-2"></div>
    </div>
  </div>
</div>
